function colmap = make_colormap(num_colors, cycle_length)

    if ~exist('cycle_length','var') || isempty(cycle_length)
        cycle_length = num_colors;
    end

hsvmap = [
    1.0000         0         0
    1.0000    0.0938         0
    1.0000    0.1875         0
    1.0000    0.2812         0
    1.0000    0.3750         0
    1.0000    0.4688         0
    1.0000    0.5625         0
    1.0000    0.6562         0
    1.0000    0.7500         0
    1.0000    0.8438         0
    1.0000    0.9375         0
    0.9688    1.0000         0
    0.8750    1.0000         0
    0.7812    1.0000         0
    0.6875    1.0000         0
    0.5938    1.0000         0
    0.5000    1.0000         0
    0.4062    1.0000         0
    0.3125    1.0000         0
    0.2188    1.0000         0
    0.1250    1.0000         0
    0.0312    1.0000         0
         0    1.0000    0.0625
         0    1.0000    0.1562
         0    1.0000    0.2500
         0    1.0000    0.3438
         0    1.0000    0.4375
         0    1.0000    0.5312
         0    1.0000    0.6250
         0    1.0000    0.7188
         0    1.0000    0.8125
         0    1.0000    0.9062
         0    1.0000    1.0000
         0    0.9062    1.0000
         0    0.8125    1.0000
         0    0.7188    1.0000
         0    0.6250    1.0000
         0    0.5312    1.0000
         0    0.4375    1.0000
         0    0.3438    1.0000
         0    0.2500    1.0000
         0    0.1562    1.0000
         0    0.0625    1.0000
    0.0312         0    1.0000
    0.1250         0    1.0000
    0.2188         0    1.0000
    0.3125         0    1.0000
    0.4062         0    1.0000
    0.5000         0    1.0000
    0.5938         0    1.0000
    0.6875         0    1.0000
    0.7812         0    1.0000
    0.8750         0    1.0000
    0.9688         0    1.0000
    1.0000         0    0.9375
    1.0000         0    0.8438
    1.0000         0    0.7500
    1.0000         0    0.6562
    1.0000         0    0.5625
    1.0000         0    0.4688
    1.0000         0    0.3750
    1.0000         0    0.2812
    1.0000         0    0.1875
    1.0000         0    0.0938];

% colmap = zeros(num_colors,3);
colmap = hsvmap(round((1:num_colors)/num_colors*size(hsvmap,1)),:);

reorder = 1:ceil(num_colors/cycle_length)*cycle_length;
reorder = reshape(reorder, [ceil(num_colors/cycle_length), cycle_length]);
reorder = reorder';
reorder = reorder(:);
reorder(reorder > num_colors) = [];

colmap = colmap(reorder,:);

end
